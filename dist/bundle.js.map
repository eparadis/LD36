{"version":3,"file":"bundle.js","sources":["webpack:///webpack/bootstrap 2dba2942af7a5eea6159","webpack:///./src/index.ts","webpack:///./src/TechItem.ts","webpack:///./src/Counter.ts"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2dba2942af7a5eea6159\n **/","\"use strict\";\nvar TechItem_ts_1 = require('./TechItem.ts');\nvar Counter_ts_1 = require('./Counter.ts');\nvar Main = (function () {\n    function Main() {\n        var gameElement = document.getElementById(\"game\");\n        this.gameElement = gameElement;\n        var timeCounter = new Counter_ts_1.Counter(\"seconds\");\n        timeCounter.attachElement(gameElement);\n        this.timeCounter = timeCounter;\n        var cashCounter = new Counter_ts_1.Counter(\"dollars\");\n        this.cashCounter = cashCounter;\n        cashCounter.attachElement(gameElement);\n        var messages = new Messages(gameElement);\n        this.messages = messages;\n        this.counts = {};\n        setInterval(function () { timeCounter.add(1); }, 1000);\n        var george = new TechItem_ts_1.TechItem([]);\n        george.addBuildAction(function () { cashCounter.add(1); });\n        var button = new Button(gameElement, \"make a buck\", george, cashCounter, 0);\n        var robotTechItem = new TechItem_ts_1.TechItem([]);\n        this.buildAThing(robotTechItem, 10, 10, 2, \"Robot\", \"build a robot\"); // 2/10 = 0.20\n        var doubleRobot = new TechItem_ts_1.TechItem([robotTechItem]);\n        this.buildAThing(doubleRobot, 25, 6, 2, \"Double robot\", \"double robot!\"); // 2/6 = 0.33\n        var factoryTechItem = new TechItem_ts_1.TechItem([robotTechItem]);\n        this.buildAThing(factoryTechItem, 100, 100, 15, \"Factory\", \"build a factory\"); // 15/100 = 0.15\n        var sweatshop = new TechItem_ts_1.TechItem([factoryTechItem]);\n        this.buildAThing(sweatshop, 500, 28, 28, \"Sweatshop\", \"sweatshop\"); // 28/28 = 1.0\n        var twodollar = new TechItem_ts_1.TechItem([sweatshop]);\n        twodollar.addBuildAction(function () { cashCounter.add(2); });\n        new Button(gameElement, \"make two bucks; bank >=\", twodollar, cashCounter, 1000); // ~250/10 = ~25.0\n        var smallIsland = new TechItem_ts_1.TechItem([factoryTechItem]);\n        this.buildAThing(smallIsland, 16000, 150, 2100, \"Small island nation\", \"small island nation\"); // 2100/150 = 14.0\n        var govt = new TechItem_ts_1.TechItem([factoryTechItem]);\n        this.buildAThing(govt, 100000, 3, 600, \"Corrupt official\", \"bribe an official\"); // 2100/3 = 200\n        var benjamin = new TechItem_ts_1.TechItem([govt]);\n        benjamin.addBuildAction(function () { cashCounter.add(100); });\n        new Button(gameElement, \"make a benjamin\", benjamin, cashCounter, 0); // ~10000/10 = 1000.0\n        var moonTechItem = new TechItem_ts_1.TechItem([robotTechItem, factoryTechItem]);\n        moonTechItem.addBuildAction(function () {\n            cashCounter.add(-1000000000);\n            var msg = \"YOU BOUGHT THE MOON! THERE IS NOTHING MORE IN LIFE.\";\n            alert(msg);\n            messages.addMessage(msg);\n        });\n        new Button(gameElement, \"the moon\", moonTechItem, cashCounter, 1000000000);\n    }\n    Main.prototype.buildAThing = function (techItem, cost, period, gain, name, buttonText) {\n        var _this = this;\n        techItem.addBuildAction(function () {\n            _this.cashCounter.add(-1 * cost);\n            var factory = new Robot(_this.timeCounter, period, function () { _this.cashCounter.add(gain); });\n            if (_this.counts[name] == undefined) {\n                _this.counts[name] = 0;\n            }\n            _this.counts[name] += 1;\n            _this.messages.addMessage(name + \" #\" + _this.counts[name] + \" built! It will make \" + gain + \" dollars every \" + period + \" seconds.\");\n        });\n        new Button(this.gameElement, buttonText, techItem, this.cashCounter, cost);\n    };\n    return Main;\n}());\nvar Messages = (function () {\n    function Messages(parent) {\n        this.messages = [];\n        var p = document.createElement(\"div\");\n        p.id = \"messages\";\n        parent.appendChild(p);\n        this.textbox = document.createElement(\"p\");\n        p.appendChild(this.textbox);\n        this.addMessage(\"Nothing has happened yet...\");\n    }\n    Messages.prototype.addMessage = function (text) {\n        this.messages.push(text);\n        if (this.messages.length > 10) {\n            this.messages.shift();\n        }\n        this.textbox.textContent = \"\";\n        for (var i = this.messages.length - 1; i >= 0; i -= 1) {\n            this.textbox.textContent += this.messages[i] + \"\\n\";\n        }\n    };\n    return Messages;\n}());\nvar Robot = (function () {\n    function Robot(counter, period, action) {\n        var _this = this;\n        counter.subscribe(function (time) { _this.act(time); });\n        this.period = period;\n        this.nextTime = -1;\n        this.action = action;\n    }\n    Robot.prototype.act = function (time) {\n        if (this.nextTime === -1) {\n            this.nextTime = time + this.period;\n        }\n        else if (time >= this.nextTime) {\n            this.action();\n            this.nextTime = time + this.period;\n        }\n    };\n    return Robot;\n}());\nvar Button = (function () {\n    function Button(parent, name, itemToBuild, counter, cost) {\n        var button = document.createElement(\"button\");\n        parent.appendChild(button);\n        button.innerText = name + \" $\" + cost;\n        button.disabled = true;\n        counter.subscribe(function (money) {\n            if (money >= cost && itemToBuild.canBuild()) {\n                button.disabled = false;\n            }\n            else {\n                button.disabled = true;\n            }\n        });\n        button.onclick = function (event) {\n            itemToBuild.build();\n        };\n    }\n    return Button;\n}());\n(function () {\n    var main = new Main();\n})();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.ts\n ** module id = 1\n ** module chunks = 0\n **/","\"use strict\";\nvar TechItem = (function () {\n    function TechItem(preReqs) {\n        this._preReqs = preReqs;\n        this._buildActions = [];\n    }\n    TechItem.prototype.isBuilt = function () {\n        return this._isBuilt;\n    };\n    TechItem.prototype.build = function () {\n        this._isBuilt = true;\n        for (var _i = 0, _a = this._buildActions; _i < _a.length; _i++) {\n            var callback = _a[_i];\n            callback();\n        }\n    };\n    TechItem.prototype.canBuild = function () {\n        for (var _i = 0, _a = this._preReqs; _i < _a.length; _i++) {\n            var prereq = _a[_i];\n            if (!prereq.isBuilt()) {\n                return false;\n            }\n        }\n        return true;\n    };\n    TechItem.prototype.addBuildAction = function (callback) {\n        this._buildActions.push(callback);\n    };\n    return TechItem;\n}());\nexports.TechItem = TechItem;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/TechItem.ts\n ** module id = 2\n ** module chunks = 0\n **/","\"use strict\";\nvar Counter = (function () {\n    function Counter(unitName) {\n        this._textElement = document.createElement('p');\n        this._unitName = unitName;\n        this._value = 0;\n        this._subscribers = [];\n        this.update();\n    }\n    Counter.prototype.attachElement = function (parent) {\n        parent.appendChild(this._textElement);\n    };\n    Counter.prototype.add = function (value) {\n        this._value += value;\n        this.update();\n    };\n    Counter.prototype.subscribe = function (action) {\n        this._subscribers.push(action);\n        action(this._value);\n    };\n    Counter.prototype.update = function () {\n        this._textElement.innerText = this._value.toString() + ' ' + this._unitName;\n        for (var _i = 0, _a = this._subscribers; _i < _a.length; _i++) {\n            var callback = _a[_i];\n            callback(this._value);\n        }\n    };\n    return Counter;\n}());\nexports.Counter = Counter;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Counter.ts\n ** module id = 3\n ** module chunks = 0\n **/"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;","sourceRoot":""}